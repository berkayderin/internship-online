generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

enum UserRole {
  USER // Öğrenci rolü
  ADMIN // Öğretmen/yönetici rolü
}

enum ActivityStatus {
  PENDING // Beklemede olan aktivite
  APPROVED // Onaylanmış aktivite
  REJECTED // Reddedilmiş aktivite
}

enum ApplicationStatus {
  PENDING // Beklemede olan başvuru
  APPROVED // Onaylanmış başvuru
  REJECTED // Reddedilmiş başvuru
}

model User {
  id                  String          @id @default(cuid()) @map("_id")
  email               String          @unique
  passwordHash        String
  firstName           String
  lastName            String
  department          String // Bölüm bilgisi
  role                UserRole        @default(USER) // Kullanıcı rolü (varsayılan: öğrenci)
  internshipStartDate DateTime? // Staj başlangıç tarihi (sadece öğrenciler için)
  internshipEndDate   DateTime? // Staj bitiş tarihi (sadece öğrenciler için)
  createdAt           DateTime        @default(now())
  updatedAt           DateTime        @updatedAt
  dailyActivities     DailyActivity[] // Günlük aktivite kayıtları
  applications        Application[] // Staj başvuruları
}

model InternshipPeriod {
  id           String        @id @default(cuid()) @map("_id")
  name         String
  startDate    DateTime
  endDate      DateTime
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  applications Application[] // Döneme ait başvurular
}

model Application {
  id                   String            @id @default(cuid()) @map("_id")
  companyName          String // Şirket adı
  companyPhone         String // Şirket telefonu
  companyWebsite       String? // Şirket web sitesi (opsiyonel)
  companyEmployeeCount Int // Toplam çalışan sayısı
  companyEngineerCount Int // Mühendis sayısı
  companyAddress       String // Şirket adresi
  status               ApplicationStatus @default(PENDING) // Başvuru durumu
  feedback             String? // Geri bildirim (opsiyonel)
  userId               String // Başvuru sahibi kullanıcı kimliği
  periodId             String // Staj dönemi kimliği
  user                 User              @relation(fields: [userId], references: [id])
  period               InternshipPeriod  @relation(fields: [periodId], references: [id])
  createdAt            DateTime          @default(now())
  updatedAt            DateTime          @updatedAt
}

model DailyActivity {
  id        String         @id @default(cuid()) @map("_id")
  date      DateTime
  content   String
  status    ActivityStatus @default(PENDING)
  feedback  String? // Geri bildirim (opsiyonel)
  userId    String
  adminId   String?
  user      User           @relation(fields: [userId], references: [id])
  createdAt DateTime       @default(now())
  updatedAt DateTime       @updatedAt
}
